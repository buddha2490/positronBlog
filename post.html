<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Brian Carter">

<title>Positron and the Altair SLC</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="post_files/libs/clipboard/clipboard.min.js"></script>
<script src="post_files/libs/quarto-html/quarto.js"></script>
<script src="post_files/libs/quarto-html/popper.min.js"></script>
<script src="post_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="post_files/libs/quarto-html/anchor.min.js"></script>
<link href="post_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="post_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="post_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="post_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="post_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="post_files/libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="post_files/libs/tabwid-1.1.3/tabwid.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Positron and the Altair SLC</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Brian Carter </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>In an earlier post, I argued that SAS is a major tool utilized by the data science community, especially in industries such as Pharma or Finance. R and Python are not rare in these industries, but SAS is still required. Users have to deal with multiple IDEs, stuck on SAS for some things, move to Rstudio for others. The only company that offers a full integration is SAS Viya, but that’s just more SAS. Wouldn’t it be nice if there was an alternative to SAS Viya that allowed data scientists access to the tools they need within a single IDE?</p>
<p>I found a little Easter egg in my initial review of Positron, something that hasn’t gotten any attention but may have huge consequences across industries. Positron supports the integration of the wide-variety of VS Code extensions, one of which is the SAS Language Compiler available from Altair.</p>
</section>
<section id="sas-in-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="sas-in-data-analysis">SAS in Data Analysis</h2>
<p>SAS is the industry standard for data management and analysis with wider use than any open source tools. The SAS ecosystem is deeply embedded in many industries and my consulting group works closely with companies who are migrating from SAS to R and Python. One of the challenges I face is from SAS users who argue that SAS is indeed the best tool for certain data management tasks.</p>
<p>As much as I love R and Python, I have come to agree that SAS is the superior platform for managing tabular data. SAS provides its customers with Viya, the only platform that integrates SAS, R, and Python into a single IDE that allows users to choose the best tool for their project. Unfortunately, SAS Viya still locks users into an proprietary ecosystems with an arguably clunky interface.</p>
</section>
<section id="altair-slc" class="level2">
<h2 class="anchored" data-anchor-id="altair-slc">Altair SLC</h2>
<p>The SAS Language Compiler (SLC) from Altair is a alternative that allows users to develop and run SAS code without buying into the SAS ecosystem. I’ve been using it for several months now and it is a remarkable system. It can read and write .sas7bdat files, execute the entirety of the DATA step, and all the major procedures. Altair acknowledges that their compiler is only about 90% complete and I have noticed a few procedure options missing here and there. But my overall impression is that this is a viable alternative to SAS for most of my clients.</p>
</section>
<section id="enter-positron" class="level2">
<h2 class="anchored" data-anchor-id="enter-positron">Enter Positron</h2>
<p>In the multilingual environment of data science professionals often find themselves juggling between R and Python on a daily basis. Recognizing this need for a more integrated workflow, Posit has introduced a variety of tools that seamlessly incorporate both languages into single environments. Their latest offering is the open-beta release of the Positron Integrated Development Environment (IDE). Positron, built on the foundation of the widely-used VS Code, provides first-class support for both R and Python, promising a more seamless integration between the two.</p>
</section>
<section id="positron-and-slc" class="level2">
<h2 class="anchored" data-anchor-id="positron-and-slc">Positron and SLC</h2>
<p>I recently integrated the new Positron with the Altair SLC and it was surprisingly easy. Since Positron is based on VSCode, it has access to all the extensions offered for VSCode. I checked and saw the Altair offers the SLC. In a perfect world, everything would just work… and it does!</p>
</section>
<section id="integrating-positron-with-the-altair-slc" class="level2">
<h2 class="anchored" data-anchor-id="integrating-positron-with-the-altair-slc">Integrating Positron with the Altair SLC</h2>
<p>Configuring this integration is surprisingly easy. You will first need to download the the SLC from Altair. Altair offers several licensing options, but there is a free community edition for evaluation and that is what I have been using. Once activated, you can search for SLC in the Positron Extension tab and click “install”. Once installed, you will need to “Start” the SLC session in Positron. Once the session is started, you can create a new SLC Notebook file and start writing SAS code.</p>
<p><img src="img/extensions.png" class="img-fluid"></p>
</section>
<section id="example-workflow" class="level2">
<h2 class="anchored" data-anchor-id="example-workflow">Example workflow</h2>
<p>Before I wrote this post, I wanted to evaluate how this would work in a real-world workflow. I spent most of my career as an epidemiologist, so I decided to download a public dataset from the National Health Interview Survey (NHIS) to demonstrate how one would use SAS and R within a single project. I can use these data to evaluate a simple epidemiological question: Is current and former smoking associated with cancer? I’ve included this workflow into a public <a href="https://github.com/buddha2490/positronBlog.git">GitHub repository</a> for review.</p>
<p><a href="https://www.cdc.gov/nchs/nhis/2023nhis.htm">The National Health Interview Survey</a> is a nationally representative sample of households and assesses demographics, health behaviors, and prevalent diseases. It has been collected annually since 1957 and is a valuable resource for epidemiologists.</p>
<section id="getting-the-data-into-positron" class="level3">
<h3 class="anchored" data-anchor-id="getting-the-data-into-positron">Getting the data into Positron</h3>
<p>The data are provided in <a href="https://ftp.cdc.gov/pub/Health_Statistics/NCHS/Datasets/NHIS/2023/adult23.zip">ASCII</a> and <a href="https://ftp.cdc.gov/pub/Health_Statistics/NCHS/Datasets/NHIS/2023/adult23csv.zip">CSV</a> formats. Each file includes a <a href="https://ftp.cdc.gov/pub/Health_Statistics/NCHS/Program_Code/NHIS/2023/Adult.sas">SAS Program</a> for importing these data into SAS that includes formats and labels for all variables.</p>
<p>Running this <code>01. Import Data.sas</code> file in the SLC Notebook will import these data into the SLC environment with few changes to the code. By default, the SLC will save data as a <code>.wpd</code> file, which is not compatible with R. You can change this option in the <code>LIBNAME</code> statement by explicitly requesting a <code>.sas7bdat</code> file. Once these changes were made, the code provided by NHIS ran without error in Positron.</p>
<pre><code>
%let nhisfolder= /users/briancarter/onedrive/myBlogs/positronBlog/data;
filename ASCIIDAT "&amp;nhisfolder/adult23.dat";
libname NHIS sas7bdat "&amp;nhisfolder";
data NHIS.&amp;adultds;
    infile ASCIIDAT;
/* --- input code --- */
run;
</code></pre>
<p>The NHIS has many hundreds of variables and I don’t need them all. Moreover, the data that are provided are not appropriate for the analysis I want to do, so I needed to do a bit of cleanup and derivation prior to my analysis. <code>02. Data Subset.sas</code> subset the NHIS data to a more limited number of variables and I got to work.</p>
<p>The nice thing about SAS is that it is a near-perfect tool for managing tabular data. I am primarily an R user, but the added complexity of variable classes, <code>NA</code> values, <code>dplyr</code>, base R, it requires a lot more expertise than creating a ggplot or running a GLM. I particularly like the ease of use with the DATA step <code>IF-THEN-ELSE</code> syntax for recoding variables, and I really like having it in Positron.</p>
<p>My most favorite feature of the SAS data step works fantastically in Positron-SLC. <a href="https://support.sas.com/resources/papers/proceedings/proceedings/sugi30/242-30.pdf">SAS Arrays</a> are a programming shortcut for performing some data step on a group of similar variables. I can do the same thing in R using <code>lapply()</code> or <code>purrr</code>, but the simplicity of SAS arrays has always really appealed to me. So I was excited to run the following code to clean up all the prevalent cancer variables:</p>
<pre><code>
array orig (*) BLADDCAN_A BLOODCAN_A
    BONECAN_A BRAINCAN_A BREASCAN_A CERVICAN_A
    ESOPHCAN_A GALLBCAN_A LARYNCAN_A
    LEUKECAN_A LIVERCAN_A LUNGCAN_A LYMPHCAN_A
    MELANCAN_A MOUTHCAN_A OVARYCAN_A PANCRCAN_A
    PROSTCAN_A
    STOMACAN_A THROACAN_A THYROCAN_A
    UTERUCAN_A HDNCKCAN_A COLRCCAN_A OTHERCANP_A;

array derived (*) bladder blood bone brain breast cervix
              esoph gallbladder larynx leukemia
              liver lung lymphoma melanoma oral ovary
              pancreas prostate stomach throat
              thyroid uterine hodgkins crc other;
do i = 1 to dim(orig);
    if orig{i} = 1 then derived{i} = 1;
    else derived{i} = 0;
end;</code></pre>
</section>
<section id="table-1" class="level3">
<h3 class="anchored" data-anchor-id="table-1">Table 1</h3>
<p>When I was a SAS programmer, I would create my output tables using <a href="https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/proc/n1dz7jdasx5t56n1rmlx346dyk6n.htm">PROC REPORT</a>. Over the years I had developed some styling syntax that would make it look ok, but PROC REPORT is a clunky tool and I never liked it.</p>
<p>R provides data scientists with a variety of tools for producing publication-ready tables that can be output in a variety of formats. For <strong>Table 1</strong>, I used the <code>flextable</code> package to create a table that summarizes the NHIS data. Categorical variables should be converted to <code>factors</code> and each variable should have a label attribute.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>subset <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age,smokestatus, allCancer)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="fu">names</span>(subset), <span class="cf">function</span>(x)  <span class="fu">attr</span>(subset[[x]], <span class="st">"label"</span>))</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>subset <span class="sc">|&gt;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarizor</span>(<span class="at">by =</span> <span class="st">"allCancer"</span>) <span class="sc">|&gt;</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_flextable</span>(<span class="at">spread_first_col =</span> <span class="cn">TRUE</span>, <span class="at">separate_with =</span> <span class="st">"variable"</span>) <span class="sc">|&gt;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bold</span>(<span class="at">i =</span> <span class="sc">~!</span><span class="fu">is.na</span>(variable), <span class="at">j =</span> <span class="dv">1</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_caption</span>(<span class="st">"Table 1: Descriptive statistics of the NHIS 2023 data"</span>) <span class="sc">|&gt;</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labelizor</span>(<span class="at">j =</span> <span class="st">"stat"</span>, <span class="at">labels =</span> labels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-284c722e{}.cl-284a1ae2{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-284a1aec{font-family:'Helvetica';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-284b0b50{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-284b0b51{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;line-height: 1;background-color:transparent;}.cl-284b0b52{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-284b0b5a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-284b0b5b{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;line-height: 1;background-color:transparent;}.cl-284b0b5c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-284b0b64{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;line-height: 1;background-color:transparent;}.cl-284b1370{width:1.317in;background-color:transparent;vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b1371{width:0.079in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b137a{width:1.309in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b137b{width:1.444in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b137c{width:1.317in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b137d{width:0.079in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b137e{width:1.309in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b1384{width:1.444in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b1385{width:1.317in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b1386{width:0.079in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b1387{width:1.309in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b1388{width:1.444in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b138e{width:1.317in;background-color:transparent;vertical-align: top;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b138f{width:0.079in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b1390{width:1.309in;background-color:transparent;vertical-align: top;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b1391{width:1.444in;background-color:transparent;vertical-align: top;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b1392{width:1.317in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b1398{width:0.079in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b1399{width:1.309in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b139a{width:1.444in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b139b{width:1.317in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b13a2{width:0.079in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b13a3{width:1.309in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b13a4{width:1.444in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b13a5{width:1.317in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b13a6{width:1.309in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-284b13a7{width:1.444in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-284c722e"><thead><tr style="overflow-wrap:break-word;"><th class="cl-284b1370"><p class="cl-284b0b50"><span class="cl-284a1ae2"></span></p></th><th class="cl-284b1371"><p class="cl-284b0b51"><span class="cl-284a1ae2"></span></p></th><th class="cl-284b137a"><p class="cl-284b0b52"><span class="cl-284a1ae2">No cancer</span><br><span class="cl-284a1ae2">(N=25,796)</span></p></th><th class="cl-284b1371"><p class="cl-284b0b51"><span class="cl-284a1ae2"></span></p></th><th class="cl-284b137b"><p class="cl-284b0b52"><span class="cl-284a1ae2">Prevalent Cancer</span><br><span class="cl-284a1ae2">(N=2,625)</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td colspan="5" class="cl-284b137c"><p class="cl-284b0b5a"><span class="cl-284a1aec">Age at baseline</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-284b1385"><p class="cl-284b0b5c"><span class="cl-284a1ae2">Mean (SD)</span></p></td><td class="cl-284b1386"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b1387"><p class="cl-284b0b5a"><span class="cl-284a1ae2">51.6 (18.3)</span></p></td><td class="cl-284b1386"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b1388"><p class="cl-284b0b5a"><span class="cl-284a1ae2">68.3 (13.1)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-284b1385"><p class="cl-284b0b5c"><span class="cl-284a1ae2">Median (IQR)</span></p></td><td class="cl-284b1386"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b1387"><p class="cl-284b0b5a"><span class="cl-284a1ae2">52.0 (31.0)</span></p></td><td class="cl-284b1386"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b1388"><p class="cl-284b0b5a"><span class="cl-284a1ae2">71.0 (16.0)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-284b138e"><p class="cl-284b0b5c"><span class="cl-284a1ae2">Range</span></p></td><td class="cl-284b138f"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b1390"><p class="cl-284b0b5a"><span class="cl-284a1ae2">18.0 - 85.0</span></p></td><td class="cl-284b138f"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b1391"><p class="cl-284b0b5a"><span class="cl-284a1ae2">20.0 - 85.0</span></p></td></tr><tr style="overflow-wrap:break-word;"><td colspan="5" class="cl-284b1392"><p class="cl-284b0b5a"><span class="cl-284a1aec">Smoking status</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-284b139b"><p class="cl-284b0b5c"><span class="cl-284a1ae2">Never smoker</span></p></td><td class="cl-284b13a2"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b13a3"><p class="cl-284b0b5a"><span class="cl-284a1ae2">16,663 (64.6%)</span></p></td><td class="cl-284b13a2"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b13a4"><p class="cl-284b0b5a"><span class="cl-284a1ae2">1,406 (53.6%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-284b139b"><p class="cl-284b0b5c"><span class="cl-284a1ae2">Former smoker</span></p></td><td class="cl-284b13a2"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b13a3"><p class="cl-284b0b5a"><span class="cl-284a1ae2">6,275 (24.3%)</span></p></td><td class="cl-284b13a2"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b13a4"><p class="cl-284b0b5a"><span class="cl-284a1ae2">944 (36.0%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-284b139b"><p class="cl-284b0b5c"><span class="cl-284a1ae2">Current smoker</span></p></td><td class="cl-284b13a2"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b13a3"><p class="cl-284b0b5a"><span class="cl-284a1ae2">2,858 (11.1%)</span></p></td><td class="cl-284b13a2"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b13a4"><p class="cl-284b0b5a"><span class="cl-284a1ae2">275 (10.5%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-284b139b"><p class="cl-284b0b5c"><span class="cl-284a1ae2">Ever smoker</span></p></td><td class="cl-284b13a2"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b13a3"><p class="cl-284b0b5a"><span class="cl-284a1ae2">0 (0.0%)</span></p></td><td class="cl-284b13a2"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b13a4"><p class="cl-284b0b5a"><span class="cl-284a1ae2">0 (0.0%)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-284b13a5"><p class="cl-284b0b5c"><span class="cl-284a1ae2">Missing</span></p></td><td class="cl-284b138f"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b13a6"><p class="cl-284b0b5a"><span class="cl-284a1ae2">0 (0.0%)</span></p></td><td class="cl-284b138f"><p class="cl-284b0b64"><span class="cl-284a1ae2"></span></p></td><td class="cl-284b13a7"><p class="cl-284b0b5a"><span class="cl-284a1ae2">0 (0.0%)</span></p></td></tr></tbody></table></div>
</div>
</div>
</section>
<section id="figure-1" class="level3">
<h3 class="anchored" data-anchor-id="figure-1">Figure 1</h3>
<p>Many of us got our start in R through the graphics capabilities. There are several packages that produce beautiful graphics, but <code>ggplot2</code> is the most popular because it is easy to use and dovetails nicely into the <code>tidyverse</code> ecosystem. For <strong>Figure 1</strong>, I’ve used <code>ggplot2</code> to create boxplots of the age distribution by cancer prevalence. Cancer is a disease that affects older people more than younger, and the boxplot clearly demonstrates this.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>one <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">"Male"</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> allCancer, <span class="at">y =</span> age)) <span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill=</span><span class="st">'#A4A4A4'</span>, <span class="at">color=</span><span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Men"</span>) <span class="sc">+</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Age at interview"</span>) <span class="sc">+</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>two <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">"Female"</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> allCancer, <span class="at">y =</span> age)) <span class="sc">+</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill=</span><span class="st">'#A4A4A4'</span>, <span class="at">color=</span><span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Women"</span>) <span class="sc">+</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="at">label =</span> <span class="st">"Age at interview"</span>) <span class="sc">+</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="fu">ggarrange</span>(one, two, <span class="at">nrow =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="post_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="table-3" class="level3">
<h3 class="anchored" data-anchor-id="table-3">Table 3</h3>
<p>To actually evaluate whether smoking is associated with cancers, I wrote a function that fit the data to a logistic regression model. The <code>glm</code> package is bundled with Base R to fit a variety of generalized linear models and I evaluated the association between smoking and all cancers, breast cancer, and lung cancer. My function pulls out the appropriate statistics, but I rely on the <code>gt</code> package to format the output into a table.</p>
<p>The <code>gt</code> package is a handy alternative to <code>flextable</code> and I like how it formats my output. The <code>gt</code> package has methods for automatically tabling output from a variety of models, but I chose to subset my output in the function prior to tabling it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>allcancer <span class="ot">&lt;-</span> <span class="fu">myModels</span>(df, <span class="st">"allCancer"</span>, <span class="st">"All Cancer Combined"</span>, <span class="st">"smokestatus"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>breast <span class="ot">&lt;-</span> <span class="fu">myModels</span>(df, <span class="st">"breast"</span>, <span class="st">"Breast cancer (women only)"</span>, <span class="st">"smokestatus"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>lung <span class="ot">&lt;-</span> <span class="fu">myModels</span>(df, <span class="st">"lung"</span>, <span class="st">"Lung cancer"</span>, <span class="st">"smokestatus"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(allcancer, breast, lung) <span class="sc">|&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Outcome =</span> tidyr<span class="sc">::</span><span class="fu">replace_na</span>(Outcome, <span class="st">""</span>)) <span class="sc">|&gt;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Association between smoking status and cancer"</span>,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"NHIS Data 2023"</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_footnote</span>(<span class="st">"Models adjust for age and race"</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">opt_align_table_header</span>(<span class="at">align =</span> <span class="st">"left"</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">opt_vertical_padding</span>(<span class="at">scale =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div id="ivdrgvkufm" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ivdrgvkufm table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ivdrgvkufm thead, #ivdrgvkufm tbody, #ivdrgvkufm tfoot, #ivdrgvkufm tr, #ivdrgvkufm td, #ivdrgvkufm th {
  border-style: none;
}

#ivdrgvkufm p {
  margin: 0;
  padding: 0;
}

#ivdrgvkufm .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ivdrgvkufm .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ivdrgvkufm .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 2px;
  padding-bottom: 2px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ivdrgvkufm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 1px;
  padding-bottom: 3px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ivdrgvkufm .gt_heading {
  background-color: #FFFFFF;
  text-align: left;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ivdrgvkufm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ivdrgvkufm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ivdrgvkufm .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 2.5px;
  padding-bottom: 3.5px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ivdrgvkufm .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ivdrgvkufm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ivdrgvkufm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ivdrgvkufm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 2.5px;
  padding-bottom: 2.5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ivdrgvkufm .gt_spanner_row {
  border-bottom-style: hidden;
}

#ivdrgvkufm .gt_group_heading {
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ivdrgvkufm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ivdrgvkufm .gt_from_md > :first-child {
  margin-top: 0;
}

#ivdrgvkufm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ivdrgvkufm .gt_row {
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ivdrgvkufm .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ivdrgvkufm .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ivdrgvkufm .gt_row_group_first td {
  border-top-width: 2px;
}

#ivdrgvkufm .gt_row_group_first th {
  border-top-width: 2px;
}

#ivdrgvkufm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ivdrgvkufm .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ivdrgvkufm .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ivdrgvkufm .gt_last_summary_row {
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ivdrgvkufm .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ivdrgvkufm .gt_first_grand_summary_row {
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ivdrgvkufm .gt_last_grand_summary_row_top {
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ivdrgvkufm .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ivdrgvkufm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ivdrgvkufm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ivdrgvkufm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 2px;
  padding-bottom: 2px;
  padding-left: 5px;
  padding-right: 5px;
}

#ivdrgvkufm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ivdrgvkufm .gt_sourcenote {
  font-size: 90%;
  padding-top: 2px;
  padding-bottom: 2px;
  padding-left: 5px;
  padding-right: 5px;
}

#ivdrgvkufm .gt_left {
  text-align: left;
}

#ivdrgvkufm .gt_center {
  text-align: center;
}

#ivdrgvkufm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ivdrgvkufm .gt_font_normal {
  font-weight: normal;
}

#ivdrgvkufm .gt_font_bold {
  font-weight: bold;
}

#ivdrgvkufm .gt_font_italic {
  font-style: italic;
}

#ivdrgvkufm .gt_super {
  font-size: 65%;
}

#ivdrgvkufm .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ivdrgvkufm .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ivdrgvkufm .gt_indent_1 {
  text-indent: 5px;
}

#ivdrgvkufm .gt_indent_2 {
  text-indent: 10px;
}

#ivdrgvkufm .gt_indent_3 {
  text-indent: 15px;
}

#ivdrgvkufm .gt_indent_4 {
  text-indent: 20px;
}

#ivdrgvkufm .gt_indent_5 {
  text-indent: 25px;
}

#ivdrgvkufm .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ivdrgvkufm div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="3" class="gt_heading gt_title gt_font_normal">Association between smoking status and cancer</th>
</tr>
<tr class="odd gt_heading">
<th colspan="3" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border">NHIS Data 2023</th>
</tr>
<tr class="header gt_col_headings">
<th id="Outcome" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Outcome</th>
<th id="Level" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Level</th>
<th id="Estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Estimate</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Outcome">All Cancer Combined</td>
<td class="gt_row gt_left" headers="Level"></td>
<td class="gt_row gt_right" headers="Estimate"></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Outcome"></td>
<td class="gt_row gt_left" headers="Level">Never smoker</td>
<td class="gt_row gt_right" headers="Estimate">1.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Outcome"></td>
<td class="gt_row gt_left" headers="Level">Former smoker</td>
<td class="gt_row gt_right" headers="Estimate">1.17 (1.07, 1.29)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Outcome"></td>
<td class="gt_row gt_left" headers="Level">Current smoker</td>
<td class="gt_row gt_right" headers="Estimate">1.19 (1.03, 1.36)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Outcome">Breast cancer (women only)</td>
<td class="gt_row gt_left" headers="Level"></td>
<td class="gt_row gt_right" headers="Estimate"></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Outcome"></td>
<td class="gt_row gt_left" headers="Level">Never smoker</td>
<td class="gt_row gt_right" headers="Estimate">1.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Outcome"></td>
<td class="gt_row gt_left" headers="Level">Former smoker</td>
<td class="gt_row gt_right" headers="Estimate">0.78 (0.66, 0.92)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Outcome"></td>
<td class="gt_row gt_left" headers="Level">Current smoker</td>
<td class="gt_row gt_right" headers="Estimate">0.72 (0.54, 0.96)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Outcome">Lung cancer</td>
<td class="gt_row gt_left" headers="Level"></td>
<td class="gt_row gt_right" headers="Estimate"></td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Outcome"></td>
<td class="gt_row gt_left" headers="Level">Never smoker</td>
<td class="gt_row gt_right" headers="Estimate">1.00</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Outcome"></td>
<td class="gt_row gt_left" headers="Level">Former smoker</td>
<td class="gt_row gt_right" headers="Estimate">4.99 (3.23, 7.71)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Outcome"></td>
<td class="gt_row gt_left" headers="Level">Current smoker</td>
<td class="gt_row gt_right" headers="Estimate">5.97 (3.45, 10.34)</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="odd">
<td colspan="3" class="gt_footnote">Models adjust for age and race</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</div>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>I was only a SAS programmer for a few years. I moved to R because it provided me with access to the latest statistical models, big data manipulation, and graphics. But I always missed the simplicty and effectiveness of the SAS DATA step. I have grown quite comfortable doing these tasks inR because moving processes across multiple IDEs was a pain.</p>
<p>Now that I can integrate the Altair SLC with Posit’s new IDE, I can do everything I need to do within a single environment and choose the most appropriate tool for the job. I can’t wait to see what the future holds for Positron and the Altair SLC and I am excited to see if the SLC can be integrated into some of Posit’s server-based products as well.</p>
<p>Stay tuned…</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>